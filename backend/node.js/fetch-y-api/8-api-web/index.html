<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<script>
    // app.js

    // FunciÃ³n para obtener un PokÃ©mon, primero intentando desde localStorage
    async function getPokemonCached(name) {
        const key = `pokemon_${name.toLowerCase()}`;

        // 1ï¸âƒ£ Verificamos si estÃ¡ en localStorage
        const cached = localStorage.getItem(key);
        if (cached) {
            console.log(`ðŸ“¦ Cargando ${name} desde localStorage`);
            const data = JSON.parse(cached);
            mostrarPokemon(data);
            return;
        }

        // 2ï¸âƒ£ Si no estÃ¡ en cache, lo pedimos a la API
        try {
            const response = await fetch(`https://pokeapi.co/api/v2/pokemon/${name}`);
            if (!response.ok) {
                throw new Error(`HTTP ${response.status} - PokÃ©mon no encontrado`);
            }
            const data = await response.json();

            // 3ï¸âƒ£ Guardamos en localStorage
            localStorage.setItem(key, JSON.stringify(data));
            console.log(`ðŸ’¾ Guardado ${name} en localStorage`);

            // 4ï¸âƒ£ Mostramos datos
            mostrarPokemon(data);
        } catch (error) {
            console.error(`âŒ Error: ${error.message}`);
        }
    }

    // FunciÃ³n auxiliar para mostrar datos del PokÃ©mon
    function mostrarPokemon(data) {
        console.log(`âœ… Nombre: ${data.name}`);
        console.log(`Altura: ${data.height}`);
        console.log(`Tipos: ${data.types.map(t => t.type.name).join(', ')}`);
    }

    // Ejemplo correcto
    getPokemonCached("pikachu");

    // Ejemplo forzando otro PokÃ©mon
    getPokemonCached("ditto");

    // Si lo llamas otra vez, se cargarÃ¡ desde localStorage
    setTimeout(() => getPokemonCached("pikachu"), 2000);

</script>

<body>

</body>

</html>